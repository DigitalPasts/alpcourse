<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.34">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Brushing up on your Python Skills – Ancient Language Processing 2026 / Gordin and Lincke</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-c8ad9e5dbd60b7b70b38521ab19b7da4.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-800d58d8a656452b2cf839acf4fa445e.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
<link href="https://fonts.googleapis.com/css2?family=Alef:wght@400;700&amp;display=swap" rel="stylesheet">


<link rel="stylesheet" href="../styles.css">
<meta property="og:title" content="Brushing up on your Python Skills – Ancient Language Processing 2026 / Gordin and Lincke">
<meta property="og:description" content="">
<meta property="og:site_name" content="Ancient Language Processing 2026 / Gordin and Lincke">
</head>

<body class="nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../digpasts_logo.png" alt="" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">Ancient Language Processing 2026 / Gordin and Lincke</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../about.html"> 
<span class="menu-text">Course Schedule</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../coursework.html"> 
<span class="menu-text">Coursework</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-code-notebooks" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Code Notebooks</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-code-notebooks">    
        <li>
    <a class="dropdown-item" href="../notebooks/index.html">
 <span class="dropdown-text">Notebooks</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../notebooks/01_colab_intro.html">
 <span class="dropdown-text">Colab Intro</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../notebooks/02_Python_Brush_up.html">
 <span class="dropdown-text">Python Brush up</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../notebooks/03_VectorizingTexts.html">
 <span class="dropdown-text">Vectorizing Texts</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="../resources.html"> 
<span class="menu-text">Materials and Texts</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#akkadian-example-1" id="toc-akkadian-example-1" class="nav-link active" data-scroll-target="#akkadian-example-1">Akkadian Example 1:</a>
  <ul class="collapse">
  <li><a href="#task-1" id="toc-task-1" class="nav-link" data-scroll-target="#task-1">Task 1:</a></li>
  <li><a href="#task-2" id="toc-task-2" class="nav-link" data-scroll-target="#task-2">Task 2:</a></li>
  </ul></li>
  <li><a href="#egyptian-example-1" id="toc-egyptian-example-1" class="nav-link" data-scroll-target="#egyptian-example-1">Egyptian Example 1:</a></li>
  <li><a href="#akkadian-example-2" id="toc-akkadian-example-2" class="nav-link" data-scroll-target="#akkadian-example-2">Akkadian Example 2:</a></li>
  <li><a href="#egyptian-example-2" id="toc-egyptian-example-2" class="nav-link" data-scroll-target="#egyptian-example-2">Egyptian Example 2:</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Brushing up on your Python Skills</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>The basics of this class are taught in Python. And the neglected basics of ALP is preprocessing our texts.</p>
<p>Preprocessing for ALP is much broader than what computer and data scientists usually mean. Philological conventions in printed and digital publications hold much more information that needs to be correctly parsed before any computational manipulation (analysis).</p>
<p>In this notebook, we are going to provide four examples of messy texts: two in Egyptian and two in Akkadian. We are going to work through the process of how we should parse the texts, what information we are losing when parsing them, and brushing up on basic Python syntax and functions while we’re at it.</p>
<section id="akkadian-example-1" class="level2">
<h2 class="anchored" data-anchor-id="akkadian-example-1">Akkadian Example 1:</h2>
<p>https://cdli.mpiwg-berlin.mpg.de/artifacts/225104</p>
<p>&amp;P225104 = TIM 10, 134 #atf: use lexical #Nippur 2N-T496; proverb; Alster proverbs <span class="citation" data-cites="tablet">@tablet</span> <span class="citation" data-cites="obverse">@obverse</span> <span class="citation" data-cites="column">@column</span> 1 1. dub-sar hu-ru 2. a-ga-asz-gi4-gi4-me!(|ME+ASZ|)-e-ne 3. dub-sar hu-ru 4. a-ga-asz-gi4-gi4-me!(|ME+ASZ|)-e#-ne <span class="citation" data-cites="reverse">@reverse</span> <span class="citation" data-cites="column">@column</span> 1 1. igi-bi 3(disz) 3(asz) 6(disz)</p>
<section id="task-1" class="level3">
<h3 class="anchored" data-anchor-id="task-1">Task 1:</h3>
<p>How do we turn this raw text into a list of words?</p>
<div id="cell-4" class="cell" data-quarto-private-1="{&quot;key&quot;:&quot;ExecuteTime&quot;,&quot;value&quot;:{&quot;end_time&quot;:&quot;2024-05-01T09:02:48.320107Z&quot;,&quot;start_time&quot;:&quot;2024-05-01T09:02:48.308147Z&quot;}}" data-scrolled="true">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>akk1 <span class="op">=</span> <span class="st">"""&amp;P225104 = TIM 10, 134</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="st">#atf: use lexical</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="st">#Nippur 2N-T496; proverb; Alster proverbs</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="st">@tablet</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="st">@obverse</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="st">@column 1</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="st">1. dub-sar hu-ru</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="st">2. a-ga-asz-gi4-gi4-me!(|ME+ASZ|)-e-ne</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="st">3. dub-sar hu-ru</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="st">4. a-ga-asz-gi4-gi4-me!(|ME+ASZ|)-e#-ne</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="st">@reverse</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="st">@column 1</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="st">1. igi-bi 3(disz) 3(asz) 6(disz)</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="st">"""</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-5" class="cell" data-quarto-private-1="{&quot;key&quot;:&quot;colab&quot;,&quot;value&quot;:{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;,&quot;height&quot;:53}}" data-outputid="a7253cbe-7867-439d-8acd-d6077257f121" data-scrolled="true">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>akk1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-6" class="cell" data-quarto-private-1="{&quot;key&quot;:&quot;colab&quot;,&quot;value&quot;:{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;}}" data-outputid="9c2b6d38-7d20-4183-bd83-e6e012eb96c2" data-scrolled="true">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># split string to lines of texts</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>lines <span class="op">=</span> akk1.split(<span class="st">"</span><span class="ch">\n</span><span class="st">"</span>)</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>lines</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-7" class="cell" data-quarto-private-1="{&quot;key&quot;:&quot;colab&quot;,&quot;value&quot;:{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;}}" data-outputid="824cdfe1-577c-4832-db58-1c2fd9ce60d2" data-scrolled="true">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># remove blanks</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>lines_full <span class="op">=</span> []</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> line <span class="kw">in</span> lines:</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> line <span class="op">!=</span> <span class="st">""</span>:</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>    lines_full.append(line)</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>lines_full</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-8" class="cell" data-quarto-private-1="{&quot;key&quot;:&quot;colab&quot;,&quot;value&quot;:{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;}}" data-outputid="a188c992-f45c-40d8-deed-2c129a4c51e2" data-scrolled="true">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># keep only lines that begin with a number</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="co"># use regular expressions</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> re</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>text_lines <span class="op">=</span> []</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> line <span class="kw">in</span> lines_full:</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> re.match(<span class="st">"^</span><span class="er">\</span><span class="st">d"</span>, line) <span class="op">!=</span> <span class="va">None</span>:</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>    text_lines.append(line)</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>text_lines</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-9" class="cell" data-quarto-private-1="{&quot;key&quot;:&quot;colab&quot;,&quot;value&quot;:{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;}}" data-outputid="d349e544-0a06-4abd-9bb1-2d84dfcfaf33" data-scrolled="true">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># separate lines into words</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>words_appended <span class="op">=</span> []</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>words_extended <span class="op">=</span> []</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> line <span class="kw">in</span> text_lines:</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>  temp_words <span class="op">=</span> line.split()</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>  words_appended.append(temp_words[<span class="dv">1</span>:]) <span class="co"># creates list of lists</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>  words_extended.extend(temp_words[<span class="dv">1</span>:]) <span class="co"># creates list</span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(words_appended)</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"-------------------------------"</span>)</span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(words_extended)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-10" class="cell" data-quarto-private-1="{&quot;key&quot;:&quot;ExecuteTime&quot;,&quot;value&quot;:{&quot;end_time&quot;:&quot;2024-05-01T09:02:48.394344Z&quot;,&quot;start_time&quot;:&quot;2024-05-01T09:02:48.381948Z&quot;}}" data-scrolled="true">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># rewrite the code above as a function</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>What information did we lose when preprocessing the texts in this way?</p>
</section>
<section id="task-2" class="level3">
<h3 class="anchored" data-anchor-id="task-2">Task 2:</h3>
<p>Create a dictionary from the raw texts, of the following format:</p>
<pre><code>{"pnum": ...
 "textID": ...
 "surface": [{
  "surfaceType": ...
  "columns": [{
    "columnNum": ...
    "text": [{
      "lineNum": ...
      "words": [..., ..., ...]
    }]
  }]
 }]}</code></pre>
<div id="cell-13" class="cell" data-quarto-private-1="{&quot;key&quot;:&quot;colab&quot;,&quot;value&quot;:{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;}}" data-outputid="d7cffabf-7eb3-4325-d176-5750872f0756" data-scrolled="true">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># separate text into lines</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>lines <span class="op">=</span> akk1.split(<span class="st">"</span><span class="ch">\n</span><span class="st">"</span>)</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>lines_full <span class="op">=</span> []</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> line <span class="kw">in</span> lines:</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> line <span class="op">!=</span> <span class="st">""</span>:</span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>    lines_full.append(line)</span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>lines_full</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-14" class="cell" data-quarto-private-1="{&quot;key&quot;:&quot;colab&quot;,&quot;value&quot;:{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;,&quot;height&quot;:216}}" data-outputid="b7ccf196-4dae-4451-fc69-a2694827ed1c" data-scrolled="true">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># store the pnum and textID in variables</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>text_ids <span class="op">=</span> lines_full[<span class="dv">0</span>]</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>pnum, textID <span class="op">=</span> text_ids.split(<span class="st">"="</span>)</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>pnum <span class="op">=</span> pnum.strip()[<span class="dv">1</span>:]</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>textID <span class="op">=</span> textID.strip()</span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(pnum)</span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(textID)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-15" class="cell" data-quarto-private-1="{&quot;key&quot;:&quot;colab&quot;,&quot;value&quot;:{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;}}" data-outputid="7eb8e64d-7d67-4875-94a8-5f83391615e1" data-scrolled="true">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create a dictionary for each surface (simple no regex method)</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="co"># what do you do when you have different types of inscribed object? (e.g. cylinder, prism, bowl, slab, etc.)</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>valid_surface_values <span class="op">=</span> [<span class="st">"@obverse"</span>, <span class="st">"@reverse"</span>]</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>surface_idx <span class="op">=</span> []</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> index, line <span class="kw">in</span> <span class="bu">enumerate</span>(lines_full):</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> line <span class="kw">in</span> valid_surface_values: <span class="co"># what is dangerous in this line? if the line of text is not exactly(!) part of surface, no lines will be found</span></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>    surface_idx.append(index)</span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(surface_idx)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-16" class="cell" data-quarto-private-1="{&quot;key&quot;:&quot;colab&quot;,&quot;value&quot;:{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;}}" data-outputid="a406b317-41c3-46d9-f8a1-e40caae7273d" data-scrolled="true">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create a dictionary for each surface (complicated with regex method)</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="co"># what do you do when you have different type of inscribed object? (e.g. cylinder, prism, bowl, slab, etc.)</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>valid_surface_values <span class="op">=</span> [<span class="st">"@obverse"</span>, <span class="st">"@reverse"</span>]</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>pattern <span class="op">=</span> <span class="vs">r"</span><span class="dv">^</span>(?:<span class="vs">"</span> <span class="op">+</span> <span class="st">"|"</span>.join([re.escape(value) <span class="cf">for</span> value <span class="kw">in</span> valid_surface_values]) <span class="op">+</span> <span class="st">")"</span> <span class="co"># This is called a list comprehension</span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>surface_idx <span class="op">=</span> []</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> index, line <span class="kw">in</span> <span class="bu">enumerate</span>(lines_full): <span class="co"># returns the index for the line and the content of the line</span></span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> re.match(pattern, line) <span class="op">!=</span> <span class="va">None</span>:</span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>    surface_idx.append(index)</span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(surface_idx)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-17" class="cell" data-quarto-private-1="{&quot;key&quot;:&quot;ExecuteTime&quot;,&quot;value&quot;:{&quot;end_time&quot;:&quot;2024-05-01T09:32:21.282331Z&quot;,&quot;start_time&quot;:&quot;2024-05-01T09:32:21.265494Z&quot;}}" data-scrolled="true">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># same code like in cell above but without list comprehension</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="co"># create a dictionary for each surface (complicated with regex method)</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="co"># what do you do when you have different type of inscribed object? (e.g. cylinder, prism, bowl, slab, etc.)</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>valid_surface_values <span class="op">=</span> [<span class="st">"@obverse"</span>, <span class="st">"@reverse"</span>]</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a><span class="co">#pattern = r"^(?:" + "|".join([re.escape(value) for value in valid_surface_values]) + ")" # This is called a list comprehension</span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>escaped_values <span class="op">=</span> []</span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> value <span class="kw">in</span> valid_surface_values:</span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>    escaped_values.append(re.escape(value))</span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(escaped_values)</span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a>pattern <span class="op">=</span> <span class="vs">r"</span><span class="dv">^</span>(?:<span class="vs">"</span> <span class="op">+</span> <span class="st">"|"</span>.join(escaped_values) <span class="op">+</span> <span class="st">")"</span></span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a>surface_idx <span class="op">=</span> []</span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> index, line <span class="kw">in</span> <span class="bu">enumerate</span>(lines_full): <span class="co"># returns the index for the line and the content of the line</span></span>
<span id="cb13-19"><a href="#cb13-19" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> re.match(pattern, line) <span class="op">!=</span> <span class="va">None</span>:</span>
<span id="cb13-20"><a href="#cb13-20" aria-hidden="true" tabindex="-1"></a>    surface_idx.append(index)</span>
<span id="cb13-21"><a href="#cb13-21" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(surface_idx)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-18" class="cell" data-quarto-private-1="{&quot;key&quot;:&quot;colab&quot;,&quot;value&quot;:{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;}}" data-outputid="00ab26a1-db45-42ab-c477-93d43e8ae551" data-scrolled="true">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># use surface indices to create surface dictionaries</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="co"># surfaceType; columnNum; lineNum; words</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="co"># surfaceType extracted using id values of lines</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a><span class="co"># columnNum needs first to check whether a column actually exists, then extracted using regex(?)/tokenize on space for any number after the word column</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a><span class="co"># lineNum is regex for any line that begins with a number plus any tags attached: how would be best to define line numbers, as integers or as string variables?</span></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a><span class="co"># words extracted from each text line after lineNum using regex and tokenized on spaces</span></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> index, <span class="bu">id</span> <span class="kw">in</span> <span class="bu">enumerate</span>(surface_idx):</span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>    surfaceType <span class="op">=</span> lines_full[<span class="bu">id</span>].replace(<span class="st">'@'</span>, <span class="st">''</span>)</span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(index, <span class="bu">id</span>)</span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> index <span class="op">&lt;</span> <span class="bu">len</span>(surface_idx) <span class="op">-</span> <span class="dv">1</span>:</span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a>        end_of_surface <span class="op">=</span> surface_idx[index<span class="op">+</span><span class="dv">1</span>]</span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a>        end_of_surface <span class="op">=</span> <span class="bu">len</span>(lines_full)</span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Extract the text content for the current surface designation</span></span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a>    surface_content <span class="op">=</span> lines_full[<span class="bu">id</span><span class="op">+</span><span class="dv">1</span>:end_of_surface]</span>
<span id="cb14-18"><a href="#cb14-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-19"><a href="#cb14-19" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Print the surface type and its content</span></span>
<span id="cb14-20"><a href="#cb14-20" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"Surface Type: </span><span class="sc">{</span>surfaceType<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb14-21"><a href="#cb14-21" aria-hidden="true" tabindex="-1"></a>    <span class="co"># print("Content:")</span></span>
<span id="cb14-22"><a href="#cb14-22" aria-hidden="true" tabindex="-1"></a>    <span class="co"># print('\n'.join(surface_content))</span></span>
<span id="cb14-23"><a href="#cb14-23" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">'---'</span>)</span>
<span id="cb14-24"><a href="#cb14-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-25"><a href="#cb14-25" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Extract column number, line numbers, and words for each surface content</span></span>
<span id="cb14-26"><a href="#cb14-26" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> line <span class="kw">in</span> surface_content:</span>
<span id="cb14-27"><a href="#cb14-27" aria-hidden="true" tabindex="-1"></a>        columnNum <span class="op">=</span> <span class="va">None</span></span>
<span id="cb14-28"><a href="#cb14-28" aria-hidden="true" tabindex="-1"></a>        lineNum <span class="op">=</span> <span class="va">None</span></span>
<span id="cb14-29"><a href="#cb14-29" aria-hidden="true" tabindex="-1"></a>        words <span class="op">=</span> []</span>
<span id="cb14-30"><a href="#cb14-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-31"><a href="#cb14-31" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Check if the line contains a column number</span></span>
<span id="cb14-32"><a href="#cb14-32" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="st">'@column'</span> <span class="kw">in</span> line:</span>
<span id="cb14-33"><a href="#cb14-33" aria-hidden="true" tabindex="-1"></a>            parts <span class="op">=</span> line.split()</span>
<span id="cb14-34"><a href="#cb14-34" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="bu">len</span>(parts) <span class="op">&gt;=</span> <span class="dv">2</span>:</span>
<span id="cb14-35"><a href="#cb14-35" aria-hidden="true" tabindex="-1"></a>                <span class="cf">try</span>:</span>
<span id="cb14-36"><a href="#cb14-36" aria-hidden="true" tabindex="-1"></a>                    columnNum <span class="op">=</span> <span class="bu">int</span>(parts[<span class="dv">1</span>])</span>
<span id="cb14-37"><a href="#cb14-37" aria-hidden="true" tabindex="-1"></a>                <span class="cf">except</span> <span class="pp">ValueError</span>:</span>
<span id="cb14-38"><a href="#cb14-38" aria-hidden="true" tabindex="-1"></a>                    <span class="cf">pass</span></span>
<span id="cb14-39"><a href="#cb14-39" aria-hidden="true" tabindex="-1"></a>            <span class="bu">print</span>(<span class="ss">f"Column Number: </span><span class="sc">{</span>columnNum<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb14-40"><a href="#cb14-40" aria-hidden="true" tabindex="-1"></a>            <span class="bu">print</span>(<span class="st">'---'</span>)</span>
<span id="cb14-41"><a href="#cb14-41" aria-hidden="true" tabindex="-1"></a>            <span class="cf">continue</span>  <span class="co"># Skip processing the line with @column</span></span>
<span id="cb14-42"><a href="#cb14-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-43"><a href="#cb14-43" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Check if the line contains a line number</span></span>
<span id="cb14-44"><a href="#cb14-44" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="st">'.'</span> <span class="kw">in</span> line:</span>
<span id="cb14-45"><a href="#cb14-45" aria-hidden="true" tabindex="-1"></a>            parts <span class="op">=</span> line.split(<span class="st">'.'</span>)</span>
<span id="cb14-46"><a href="#cb14-46" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="bu">len</span>(parts) <span class="op">&gt;=</span> <span class="dv">2</span>:</span>
<span id="cb14-47"><a href="#cb14-47" aria-hidden="true" tabindex="-1"></a>                lineNum <span class="op">=</span> parts[<span class="dv">0</span>].strip()</span>
<span id="cb14-48"><a href="#cb14-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-49"><a href="#cb14-49" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Tokenize the words in the line</span></span>
<span id="cb14-50"><a href="#cb14-50" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> lineNum:</span>
<span id="cb14-51"><a href="#cb14-51" aria-hidden="true" tabindex="-1"></a>            words <span class="op">=</span> parts[<span class="dv">1</span>].strip().split()</span>
<span id="cb14-52"><a href="#cb14-52" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb14-53"><a href="#cb14-53" aria-hidden="true" tabindex="-1"></a>            words <span class="op">=</span> line.strip().split()</span>
<span id="cb14-54"><a href="#cb14-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-55"><a href="#cb14-55" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Print the extracted information for each line</span></span>
<span id="cb14-56"><a href="#cb14-56" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="ss">f"Line Number: </span><span class="sc">{</span>lineNum<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb14-57"><a href="#cb14-57" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="ss">f"Words: </span><span class="sc">{</span>words<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb14-58"><a href="#cb14-58" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="st">'---'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-19" class="cell" data-quarto-private-1="{&quot;key&quot;:&quot;colab&quot;,&quot;value&quot;:{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;}}" data-outputid="2c2661f3-aa64-450b-c3b1-93fcd9c69f87" data-scrolled="true">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Combine the surfaces and metadata into one dictionary</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>output <span class="op">=</span> {</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">"pnum"</span>: pnum,</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">"textID"</span>: textID,</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">"surface"</span>: []</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> index, <span class="bu">id</span> <span class="kw">in</span> <span class="bu">enumerate</span>(surface_idx):</span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>    surfaceType <span class="op">=</span> lines_full[<span class="bu">id</span>].replace(<span class="st">'@'</span>, <span class="st">''</span>)</span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>    surface <span class="op">=</span> {</span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a>        <span class="st">"surfaceType"</span>: surfaceType,</span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a>        <span class="st">"columns"</span>: []</span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> index <span class="op">&lt;</span> <span class="bu">len</span>(surface_idx) <span class="op">-</span> <span class="dv">1</span>:</span>
<span id="cb15-17"><a href="#cb15-17" aria-hidden="true" tabindex="-1"></a>        end_of_surface <span class="op">=</span> surface_idx[index<span class="op">+</span><span class="dv">1</span>]</span>
<span id="cb15-18"><a href="#cb15-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb15-19"><a href="#cb15-19" aria-hidden="true" tabindex="-1"></a>        end_of_surface <span class="op">=</span> <span class="bu">len</span>(lines_full)</span>
<span id="cb15-20"><a href="#cb15-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-21"><a href="#cb15-21" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Extract the text content for the current surface designation</span></span>
<span id="cb15-22"><a href="#cb15-22" aria-hidden="true" tabindex="-1"></a>    surface_content <span class="op">=</span> lines_full[<span class="bu">id</span><span class="op">+</span><span class="dv">1</span>:end_of_surface]</span>
<span id="cb15-23"><a href="#cb15-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-24"><a href="#cb15-24" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Extract column number, line numbers, and words for each surface content</span></span>
<span id="cb15-25"><a href="#cb15-25" aria-hidden="true" tabindex="-1"></a>    columnNum <span class="op">=</span> <span class="va">None</span></span>
<span id="cb15-26"><a href="#cb15-26" aria-hidden="true" tabindex="-1"></a>    column <span class="op">=</span> {</span>
<span id="cb15-27"><a href="#cb15-27" aria-hidden="true" tabindex="-1"></a>        <span class="st">"columnNum"</span>: <span class="va">None</span>,</span>
<span id="cb15-28"><a href="#cb15-28" aria-hidden="true" tabindex="-1"></a>        <span class="st">"text"</span>: []</span>
<span id="cb15-29"><a href="#cb15-29" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb15-30"><a href="#cb15-30" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> line <span class="kw">in</span> surface_content:</span>
<span id="cb15-31"><a href="#cb15-31" aria-hidden="true" tabindex="-1"></a>        lineNum <span class="op">=</span> <span class="va">None</span></span>
<span id="cb15-32"><a href="#cb15-32" aria-hidden="true" tabindex="-1"></a>        words <span class="op">=</span> []</span>
<span id="cb15-33"><a href="#cb15-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-34"><a href="#cb15-34" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Check if the line contains a column number</span></span>
<span id="cb15-35"><a href="#cb15-35" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="st">'@column'</span> <span class="kw">in</span> line:</span>
<span id="cb15-36"><a href="#cb15-36" aria-hidden="true" tabindex="-1"></a>            parts <span class="op">=</span> line.split()</span>
<span id="cb15-37"><a href="#cb15-37" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="bu">len</span>(parts) <span class="op">&gt;=</span> <span class="dv">2</span>:</span>
<span id="cb15-38"><a href="#cb15-38" aria-hidden="true" tabindex="-1"></a>                <span class="cf">try</span>:</span>
<span id="cb15-39"><a href="#cb15-39" aria-hidden="true" tabindex="-1"></a>                    columnNum <span class="op">=</span> <span class="bu">int</span>(parts[<span class="dv">1</span>])</span>
<span id="cb15-40"><a href="#cb15-40" aria-hidden="true" tabindex="-1"></a>                    column[<span class="st">"columnNum"</span>] <span class="op">=</span> columnNum</span>
<span id="cb15-41"><a href="#cb15-41" aria-hidden="true" tabindex="-1"></a>                <span class="cf">except</span> <span class="pp">ValueError</span>:</span>
<span id="cb15-42"><a href="#cb15-42" aria-hidden="true" tabindex="-1"></a>                    <span class="cf">pass</span></span>
<span id="cb15-43"><a href="#cb15-43" aria-hidden="true" tabindex="-1"></a>            <span class="cf">continue</span>  <span class="co"># Skip processing the line with @column</span></span>
<span id="cb15-44"><a href="#cb15-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-45"><a href="#cb15-45" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Check if the line contains a line number</span></span>
<span id="cb15-46"><a href="#cb15-46" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="st">'.'</span> <span class="kw">in</span> line:</span>
<span id="cb15-47"><a href="#cb15-47" aria-hidden="true" tabindex="-1"></a>            parts <span class="op">=</span> line.split(<span class="st">'.'</span>)</span>
<span id="cb15-48"><a href="#cb15-48" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="bu">len</span>(parts) <span class="op">&gt;=</span> <span class="dv">2</span>:</span>
<span id="cb15-49"><a href="#cb15-49" aria-hidden="true" tabindex="-1"></a>                lineNum <span class="op">=</span> parts[<span class="dv">0</span>].strip()</span>
<span id="cb15-50"><a href="#cb15-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-51"><a href="#cb15-51" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Tokenize the words in the line</span></span>
<span id="cb15-52"><a href="#cb15-52" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> lineNum:</span>
<span id="cb15-53"><a href="#cb15-53" aria-hidden="true" tabindex="-1"></a>            words <span class="op">=</span> parts[<span class="dv">1</span>].strip().split()</span>
<span id="cb15-54"><a href="#cb15-54" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb15-55"><a href="#cb15-55" aria-hidden="true" tabindex="-1"></a>            words <span class="op">=</span> line.strip().split()</span>
<span id="cb15-56"><a href="#cb15-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-57"><a href="#cb15-57" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Add the line information to the column</span></span>
<span id="cb15-58"><a href="#cb15-58" aria-hidden="true" tabindex="-1"></a>        line_info <span class="op">=</span> {</span>
<span id="cb15-59"><a href="#cb15-59" aria-hidden="true" tabindex="-1"></a>            <span class="st">"lineNum"</span>: lineNum,</span>
<span id="cb15-60"><a href="#cb15-60" aria-hidden="true" tabindex="-1"></a>            <span class="st">"words"</span>: words</span>
<span id="cb15-61"><a href="#cb15-61" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb15-62"><a href="#cb15-62" aria-hidden="true" tabindex="-1"></a>        column[<span class="st">"text"</span>].append(line_info)</span>
<span id="cb15-63"><a href="#cb15-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-64"><a href="#cb15-64" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Add the column to the surface</span></span>
<span id="cb15-65"><a href="#cb15-65" aria-hidden="true" tabindex="-1"></a>    surface[<span class="st">"columns"</span>].append(column)</span>
<span id="cb15-66"><a href="#cb15-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-67"><a href="#cb15-67" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Add the surface to the output</span></span>
<span id="cb15-68"><a href="#cb15-68" aria-hidden="true" tabindex="-1"></a>    output[<span class="st">"surface"</span>].append(surface)</span>
<span id="cb15-69"><a href="#cb15-69" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-70"><a href="#cb15-70" aria-hidden="true" tabindex="-1"></a><span class="co"># Print the output in the specified dictionary format</span></span>
<span id="cb15-71"><a href="#cb15-71" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(output)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-20" class="cell" data-quarto-private-1="{&quot;key&quot;:&quot;ExecuteTime&quot;,&quot;value&quot;:{&quot;end_time&quot;:&quot;2024-05-01T09:02:48.449539Z&quot;,&quot;start_time&quot;:&quot;2024-05-01T09:02:48.444656Z&quot;}}" data-scrolled="true">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Save the output dictionary as a JSON file</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> json</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> <span class="bu">open</span>(<span class="ss">f"</span><span class="sc">{</span>pnum<span class="sc">}</span><span class="ss">.json"</span>, <span class="st">"w"</span>) <span class="im">as</span> json_file:</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>    json.dump(output, json_file, indent<span class="op">=</span><span class="dv">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-21" class="cell" data-quarto-private-1="{&quot;key&quot;:&quot;ExecuteTime&quot;,&quot;value&quot;:{&quot;end_time&quot;:&quot;2024-05-01T09:02:48.453242Z&quot;,&quot;start_time&quot;:&quot;2024-05-01T09:02:48.451033Z&quot;}}" data-scrolled="true">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># rewrite the code above into a function</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(json_file)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="egyptian-example-1" class="level2">
<h2 class="anchored" data-anchor-id="egyptian-example-1">Egyptian Example 1:</h2>
<p>A sentence from the sarcophagus of the Napatan king Aspelta (c.&nbsp;600-580 BCE), found in his pyramid in Nuri, Sudan (Nu. 8), https://collections.mfa.org/objects/145117</p>
<p>Get the context of the sentence from the Thesaurus Linguae Aegyptiae: https://thesaurus-linguae-aegyptiae.de/text/27KHHMEP4VHSDH737F2OFLKNSE/sentences</p>
<div id="cell-23" class="cell" data-quarto-private-1="{&quot;key&quot;:&quot;ExecuteTime&quot;,&quot;value&quot;:{&quot;end_time&quot;:&quot;2024-05-01T09:02:48.481434Z&quot;,&quot;start_time&quot;:&quot;2024-05-01T09:02:48.455213Z&quot;}}" data-scrolled="true">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># This Dictionary was created from the original json file</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>eg1 <span class="op">=</span> {<span class="st">'publication_statement'</span>: {<span class="st">'credit_citation'</span>: <span class="st">'Doris Topmann, Sentence ID 2CBOF5UQ7JGETCXG2CQKPCWDZM &lt;https://github.com/thesaurus-linguae-aegyptiae/tla-raw-data/blob/v17/sentences/2CBOF5UQ7JGETCXG2CQKPCWDZM.json&gt;, in: Thesaurus Linguae Aegyptiae: Raw Data &lt;https://github.com/thesaurus-linguae-aegyptiae/tla-raw-data&gt;, Corpus issue 17 (31 October 2022), ed. by Tonio Sebastian Richter &amp; Daniel A. Werning on behalf of the Berlin-Brandenburgische Akademie der Wissenschaften and Hans-Werner Fischer-Elfert &amp; Peter Dils on behalf of the Sächsische Akademie der Wissenschaften zu Leipzig (first published: 22 September 2023)'</span>, <span class="st">'collection_editors'</span>: <span class="st">'Tonio Sebastian Richter &amp; Daniel A. Werning on behalf of the Berlin-Brandenburgische Akademie der Wissenschaften and Hans-Werner Fischer-Elfert &amp; Peter Dils on behalf of the Sächsische Akademie der Wissenschaften zu Leipzig'</span>, <span class="st">'data_engineers'</span>: {<span class="st">'input_software_BTS'</span>: [<span class="st">'Christoph Plutte'</span>, <span class="st">'Jakob Höper'</span>], <span class="st">'database_curation'</span>: [<span class="st">'Simon D. Schweitzer'</span>], <span class="st">'data_transformation'</span>: [<span class="st">'Jakob Höper'</span>, <span class="st">'R. Dominik Blöse'</span>, <span class="st">'Daniel A. Werning'</span>]}, <span class="st">'date_published_in_TLA'</span>: <span class="st">'2022-10-31'</span>, <span class="st">'rawdata_first_published'</span>: <span class="st">'2023-09-22'</span>, <span class="st">'corresponding_TLA_URL'</span>: <span class="st">'https://thesaurus-linguae-aegyptiae.de/sentence/2CBOF5UQ7JGETCXG2CQKPCWDZM'</span>, <span class="st">'license'</span>: <span class="st">'Creative Commons Attribution-ShareAlike 4.0 International (CC BY-SA 4.0) &lt;https://creativecommons.org/licenses/by-sa/4.0/&gt;'</span>}, <span class="st">'context'</span>: {<span class="st">'line'</span>: <span class="st">'III'</span>, <span class="st">'paragraph'</span>: <span class="va">None</span>, <span class="st">'pos'</span>: <span class="dv">7</span>, <span class="st">'textId'</span>: <span class="st">'27KHHMEP4VHSDH737F2OFLKNSE'</span>, <span class="st">'textType'</span>: <span class="st">'Text'</span>, <span class="st">'variants'</span>: <span class="dv">1</span>}, <span class="st">'eclass'</span>: <span class="st">'BTSSentence'</span>, <span class="st">'glyphs'</span>: {<span class="st">'mdc_compact'</span>: <span class="va">None</span>, <span class="st">'unicode'</span>: <span class="va">None</span>}, <span class="st">'id'</span>: <span class="st">'2CBOF5UQ7JGETCXG2CQKPCWDZM'</span>, <span class="st">'relations'</span>: {<span class="st">'contains'</span>: [{<span class="st">'eclass'</span>: <span class="st">'BTSAnnotation'</span>, <span class="st">'id'</span>: <span class="st">'DYJEAXFKBJAXJPVLJGWREJZJ5M'</span>, <span class="st">'ranges'</span>: [{<span class="st">'end'</span>: <span class="st">'OKLGJLCEQFHU7HDRYUTYR352YA'</span>, <span class="st">'start'</span>: <span class="st">'22TFIMS2CBBCFFCDSCAIT3HR3Y'</span>}], <span class="st">'type'</span>: <span class="st">'ägyptologische Textsegmentierung'</span>}], <span class="st">'partOf'</span>: [{<span class="st">'eclass'</span>: <span class="st">'BTSText'</span>, <span class="st">'id'</span>: <span class="st">'27KHHMEP4VHSDH737F2OFLKNSE'</span>, <span class="st">'name'</span>: <span class="st">'Isis (HT 15, HT 14, HT 17)'</span>, <span class="st">'type'</span>: <span class="st">'Text'</span>}]}, <span class="st">'tokens'</span>: [{<span class="st">'annoTypes'</span>: [<span class="st">'ägyptologische Textsegmentierung'</span>], <span class="st">'flexion'</span>: {<span class="st">'btsGloss'</span>: <span class="st">'(unspecified)'</span>, <span class="st">'lingGloss'</span>: <span class="st">'PTCL'</span>, <span class="st">'numeric'</span>: <span class="dv">3</span>}, <span class="st">'glyphs'</span>: {<span class="st">'mdc_artificially_aligned'</span>: <span class="va">True</span>, <span class="st">'mdc_compact'</span>: <span class="st">'D35:N35'</span>, <span class="st">'mdc_original'</span>: <span class="st">'D35-N35'</span>, <span class="st">'mdc_original_safe'</span>: <span class="va">None</span>, <span class="st">'mdc_tla'</span>: <span class="st">'D35-N35'</span>, <span class="st">'order'</span>: [<span class="dv">1</span>, <span class="dv">2</span>], <span class="st">'unicode'</span>: <span class="st">'𓂜𓈖'</span>}, <span class="st">'id'</span>: <span class="st">'22TFIMS2CBBCFFCDSCAIT3HR3Y'</span>, <span class="st">'label'</span>: <span class="st">'nn'</span>, <span class="st">'lemma'</span>: {<span class="st">'POS'</span>: {<span class="st">'type'</span>: <span class="st">'particle'</span>}, <span class="st">'id'</span>: <span class="st">'851961'</span>}, <span class="st">'transcription'</span>: {<span class="st">'mdc'</span>: <span class="st">'nn'</span>, <span class="st">'unicode'</span>: <span class="st">'nn'</span>}, <span class="st">'translations'</span>: {<span class="st">'de'</span>: [<span class="st">'[Negationspartikel]'</span>]}, <span class="st">'type'</span>: <span class="st">'word'</span>}, {<span class="st">'annoTypes'</span>: [<span class="st">'ägyptologische Textsegmentierung'</span>], <span class="st">'flexion'</span>: {<span class="st">'btsGloss'</span>: <span class="st">'SC.act.ngem.nom.subj_Neg.nn'</span>, <span class="st">'lingGloss'</span>: <span class="st">'V</span><span class="ch">\\</span><span class="st">tam.act'</span>, <span class="st">'numeric'</span>: <span class="dv">210020</span>}, <span class="st">'glyphs'</span>: {<span class="st">'mdc_artificially_aligned'</span>: <span class="va">False</span>, <span class="st">'mdc_compact'</span>: <span class="st">'W11-V28-A7'</span>, <span class="st">'mdc_original'</span>: <span class="st">'W11-V28-A7'</span>, <span class="st">'mdc_original_safe'</span>: <span class="va">None</span>, <span class="st">'mdc_tla'</span>: <span class="st">'W11-V28-A7'</span>, <span class="st">'order'</span>: [<span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>], <span class="st">'unicode'</span>: <span class="st">'𓎼𓎛𓀉'</span>}, <span class="st">'id'</span>: <span class="st">'IOLUGQXLCRGNLMTAPJ65LI7MHU'</span>, <span class="st">'label'</span>: <span class="st">'gḥ'</span>, <span class="st">'lemma'</span>: {<span class="st">'POS'</span>: {<span class="st">'subtype'</span>: <span class="st">'verb_3-lit'</span>, <span class="st">'type'</span>: <span class="st">'verb'</span>}, <span class="st">'id'</span>: <span class="st">'166480'</span>}, <span class="st">'transcription'</span>: {<span class="st">'mdc'</span>: <span class="st">'gH'</span>, <span class="st">'unicode'</span>: <span class="st">'gḥ'</span>}, <span class="st">'translations'</span>: {<span class="st">'de'</span>: [<span class="st">'matt sein'</span>]}, <span class="st">'type'</span>: <span class="st">'word'</span>}, {<span class="st">'annoTypes'</span>: [<span class="st">'ägyptologische Textsegmentierung'</span>], <span class="st">'flexion'</span>: {<span class="st">'btsGloss'</span>: <span class="st">'Noun.pl.stpr.3sgm'</span>, <span class="st">'lingGloss'</span>: <span class="st">'N.f:pl:stpr'</span>, <span class="st">'numeric'</span>: <span class="dv">70154</span>}, <span class="st">'glyphs'</span>: {<span class="st">'mdc_artificially_aligned'</span>: <span class="va">True</span>, <span class="st">'mdc_compact'</span>: <span class="st">'D36:X1*F51B-Z2'</span>, <span class="st">'mdc_original'</span>: <span class="st">'D36-X1-F51B-Z2'</span>, <span class="st">'mdc_original_safe'</span>: <span class="va">None</span>, <span class="st">'mdc_tla'</span>: <span class="st">'D36-X1-F51B-Z2'</span>, <span class="st">'order'</span>: [<span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>], <span class="st">'unicode'</span>: <span class="st">'𓂝𓏏𓄹︀</span><span class="ch">\U00013440</span><span class="st">𓏥'</span>}, <span class="st">'id'</span>: <span class="st">'GUVBJUGCSVF5VN55PN6RYS4YLI'</span>, <span class="st">'label'</span>: <span class="st">'ꜥ,t.pl'</span>, <span class="st">'lemma'</span>: {<span class="st">'POS'</span>: {<span class="st">'subtype'</span>: <span class="st">'substantive_fem'</span>, <span class="st">'type'</span>: <span class="st">'substantive'</span>}, <span class="st">'id'</span>: <span class="st">'34550'</span>}, <span class="st">'transcription'</span>: {<span class="st">'mdc'</span>: <span class="st">'a.t.PL'</span>, <span class="st">'unicode'</span>: <span class="st">'ꜥ.t.PL'</span>}, <span class="st">'translations'</span>: {<span class="st">'de'</span>: [<span class="st">'Glied; Körperteil'</span>]}, <span class="st">'type'</span>: <span class="st">'word'</span>}, {<span class="st">'annoTypes'</span>: [<span class="st">'ägyptologische Textsegmentierung'</span>], <span class="st">'flexion'</span>: {<span class="st">'btsGloss'</span>: <span class="st">'(unspecified)'</span>, <span class="st">'lingGloss'</span>: <span class="st">'-3sg.m'</span>, <span class="st">'numeric'</span>: <span class="dv">3</span>}, <span class="st">'glyphs'</span>: {<span class="st">'mdc_artificially_aligned'</span>: <span class="va">False</span>, <span class="st">'mdc_compact'</span>: <span class="st">'I9'</span>, <span class="st">'mdc_original'</span>: <span class="st">'I9'</span>, <span class="st">'mdc_original_safe'</span>: <span class="va">None</span>, <span class="st">'mdc_tla'</span>: <span class="st">'I9'</span>, <span class="st">'order'</span>: [<span class="dv">9</span>], <span class="st">'unicode'</span>: <span class="st">'𓆑'</span>}, <span class="st">'id'</span>: <span class="st">'GIHCJ27JXVAM7GDUYWGEPKBRB4'</span>, <span class="st">'label'</span>: <span class="st">'=f'</span>, <span class="st">'lemma'</span>: {<span class="st">'POS'</span>: {<span class="st">'subtype'</span>: <span class="st">'personal_pronoun'</span>, <span class="st">'type'</span>: <span class="st">'pronoun'</span>}, <span class="st">'id'</span>: <span class="st">'10050'</span>}, <span class="st">'transcription'</span>: {<span class="st">'mdc'</span>: <span class="st">'=f'</span>, <span class="st">'unicode'</span>: <span class="st">'=f'</span>}, <span class="st">'translations'</span>: {<span class="st">'de'</span>: [<span class="st">'[Suffix Pron. sg.3.m.]'</span>]}, <span class="st">'type'</span>: <span class="st">'word'</span>}, {<span class="st">'annoTypes'</span>: [<span class="st">'ägyptologische Textsegmentierung'</span>], <span class="st">'flexion'</span>: {<span class="st">'btsGloss'</span>: <span class="st">'(unspecified)'</span>, <span class="st">'lingGloss'</span>: <span class="st">'dem.f.pl'</span>, <span class="st">'numeric'</span>: <span class="dv">3</span>}, <span class="st">'glyphs'</span>: {<span class="st">'mdc_artificially_aligned'</span>: <span class="va">True</span>, <span class="st">'mdc_compact'</span>: <span class="st">'M17-Q3:N35'</span>, <span class="st">'mdc_original'</span>: <span class="st">'M17-Q3-N35'</span>, <span class="st">'mdc_original_safe'</span>: <span class="va">None</span>, <span class="st">'mdc_tla'</span>: <span class="st">'M17-Q3-N35'</span>, <span class="st">'order'</span>: [<span class="dv">10</span>, <span class="dv">11</span>, <span class="dv">12</span>], <span class="st">'unicode'</span>: <span class="st">'𓇋𓊪𓈖'</span>}, <span class="st">'id'</span>: <span class="st">'Z6HTGGPBPRDT3OZTZNXRF2GRDA'</span>, <span class="st">'label'</span>: <span class="st">'jp〈t〉n'</span>, <span class="st">'lemma'</span>: {<span class="st">'POS'</span>: {<span class="st">'subtype'</span>: <span class="st">'demonstrative_pronoun'</span>, <span class="st">'type'</span>: <span class="st">'pronoun'</span>}, <span class="st">'id'</span>: <span class="st">'850009'</span>}, <span class="st">'transcription'</span>: {<span class="st">'mdc'</span>: <span class="st">'jp〈t〉n'</span>, <span class="st">'unicode'</span>: <span class="st">'jp〈t〉n'</span>}, <span class="st">'translations'</span>: {<span class="st">'de'</span>: [<span class="st">'diese [Dem.Pron. pl.f.]'</span>]}, <span class="st">'type'</span>: <span class="st">'word'</span>}, {<span class="st">'annoTypes'</span>: [<span class="st">'ägyptologische Textsegmentierung'</span>], <span class="st">'flexion'</span>: {<span class="st">'btsGloss'</span>: <span class="st">'(unspecified)'</span>, <span class="st">'lingGloss'</span>: <span class="st">'TITL'</span>, <span class="st">'numeric'</span>: <span class="dv">3</span>}, <span class="st">'glyphs'</span>: {<span class="st">'mdc_artificially_aligned'</span>: <span class="va">False</span>, <span class="st">'mdc_compact'</span>: <span class="st">'D4-Q1-A40'</span>, <span class="st">'mdc_original'</span>: <span class="st">'D4-Q1-A40'</span>, <span class="st">'mdc_original_safe'</span>: <span class="va">None</span>, <span class="st">'mdc_tla'</span>: <span class="st">'D4-Q1-A40'</span>, <span class="st">'order'</span>: [<span class="dv">13</span>, <span class="dv">14</span>, <span class="dv">15</span>], <span class="st">'unicode'</span>: <span class="st">'𓁹𓊨𓀭'</span>}, <span class="st">'id'</span>: <span class="st">'UCFJWBLRKJG4NJWTWT22WDR2MU'</span>, <span class="st">'label'</span>: <span class="st">'Wsr,w'</span>, <span class="st">'lemma'</span>: {<span class="st">'POS'</span>: {<span class="st">'subtype'</span>: <span class="st">'title'</span>, <span class="st">'type'</span>: <span class="st">'epitheton_title'</span>}, <span class="st">'id'</span>: <span class="st">'49461'</span>}, <span class="st">'transcription'</span>: {<span class="st">'mdc'</span>: <span class="st">'wsr.w'</span>, <span class="st">'unicode'</span>: <span class="st">'Wsr.w'</span>}, <span class="st">'translations'</span>: {<span class="st">'de'</span>: [<span class="st">'Osiris (Totentitel des Verstorbenen)'</span>]}, <span class="st">'type'</span>: <span class="st">'word'</span>}, {<span class="st">'annoTypes'</span>: [<span class="st">'ägyptologische Textsegmentierung'</span>], <span class="st">'flexion'</span>: {<span class="st">'btsGloss'</span>: <span class="st">'(unspecified)'</span>, <span class="st">'lingGloss'</span>: <span class="st">'N'</span>, <span class="st">'numeric'</span>: <span class="dv">3</span>}, <span class="st">'glyphs'</span>: {<span class="st">'mdc_artificially_aligned'</span>: <span class="va">True</span>, <span class="st">'mdc_compact'</span>: <span class="st">'M23-X1:N35'</span>, <span class="st">'mdc_original'</span>: <span class="st">'M23-X1-N35'</span>, <span class="st">'mdc_original_safe'</span>: <span class="va">None</span>, <span class="st">'mdc_tla'</span>: <span class="st">'M23-X1-N35'</span>, <span class="st">'order'</span>: [<span class="dv">16</span>, <span class="dv">17</span>, <span class="dv">18</span>], <span class="st">'unicode'</span>: <span class="st">'𓇓𓏏𓈖'</span>}, <span class="st">'id'</span>: <span class="st">'LI5FJI4ZUJEMPIKS5RQ5HHNBUE'</span>, <span class="st">'label'</span>: <span class="st">'nzw'</span>, <span class="st">'lemma'</span>: {<span class="st">'POS'</span>: {<span class="st">'type'</span>: <span class="st">'substantive'</span>}, <span class="st">'id'</span>: <span class="st">'88040'</span>}, <span class="st">'transcription'</span>: {<span class="st">'mdc'</span>: <span class="st">'nzw'</span>, <span class="st">'unicode'</span>: <span class="st">'nzw'</span>}, <span class="st">'translations'</span>: {<span class="st">'de'</span>: [<span class="st">'König'</span>]}, <span class="st">'type'</span>: <span class="st">'word'</span>}, {<span class="st">'annoTypes'</span>: [<span class="st">'ägyptologische Textsegmentierung'</span>], <span class="st">'flexion'</span>: {<span class="st">'btsGloss'</span>: <span class="st">'(unspecified)'</span>, <span class="st">'lingGloss'</span>: <span class="st">'ROYLN'</span>, <span class="st">'numeric'</span>: <span class="dv">3</span>}, <span class="st">'glyphs'</span>: {<span class="st">'mdc_artificially_aligned'</span>: <span class="va">True</span>, <span class="st">'mdc_compact'</span>: <span class="st">'V30:N17-N17'</span>, <span class="st">'mdc_original'</span>: <span class="st">'V30-N17-N17'</span>, <span class="st">'mdc_original_safe'</span>: <span class="va">None</span>, <span class="st">'mdc_tla'</span>: <span class="st">'V30-N17-N17'</span>, <span class="st">'order'</span>: [<span class="dv">19</span>, <span class="dv">20</span>, <span class="dv">21</span>], <span class="st">'unicode'</span>: <span class="st">'𓎟𓇿𓇿'</span>}, <span class="st">'id'</span>: <span class="st">'ICADWHGbHkfdokpooG4eCy3Zfe8'</span>, <span class="st">'label'</span>: <span class="st">'nb-Tꜣ,du'</span>, <span class="st">'lemma'</span>: {<span class="st">'POS'</span>: {<span class="st">'subtype'</span>: <span class="st">'epith_king'</span>, <span class="st">'type'</span>: <span class="st">'epitheton_title'</span>}, <span class="st">'id'</span>: <span class="st">'400038'</span>}, <span class="st">'transcription'</span>: {<span class="st">'mdc'</span>: <span class="st">'nb-tA.DU'</span>, <span class="st">'unicode'</span>: <span class="st">'nb-Tꜣ.DU'</span>}, <span class="st">'translations'</span>: {<span class="st">'de'</span>: [<span class="st">'Herr der Beiden Länder (Könige)'</span>]}, <span class="st">'type'</span>: <span class="st">'word'</span>}, {<span class="st">'annoTypes'</span>: [<span class="st">'ägyptologische Textsegmentierung'</span>], <span class="st">'flexion'</span>: {<span class="st">'btsGloss'</span>: <span class="st">'(unspecified)'</span>, <span class="st">'lingGloss'</span>: <span class="st">'TITL'</span>, <span class="st">'numeric'</span>: <span class="dv">3</span>}, <span class="st">'glyphs'</span>: {<span class="st">'mdc_artificially_aligned'</span>: <span class="va">True</span>, <span class="st">'mdc_compact'</span>: <span class="st">'V30:D4-Aa1*X1:Y1'</span>, <span class="st">'mdc_original'</span>: <span class="st">'V30-D4-Aa1-X1-Y1'</span>, <span class="st">'mdc_original_safe'</span>: <span class="va">None</span>, <span class="st">'mdc_tla'</span>: <span class="st">'V30-D4-Aa1-X1-Y1'</span>, <span class="st">'order'</span>: [<span class="dv">22</span>, <span class="dv">23</span>, <span class="dv">24</span>, <span class="dv">25</span>, <span class="dv">26</span>], <span class="st">'unicode'</span>: <span class="st">'𓎟𓁹𓐍𓏏𓏛'</span>}, <span class="st">'id'</span>: <span class="st">'ICADWHT2O1dc30SXuRZUlquIDpM'</span>, <span class="st">'label'</span>: <span class="st">'nb-jr(,t)-(j)ḫ,t'</span>, <span class="st">'lemma'</span>: {<span class="st">'POS'</span>: {<span class="st">'subtype'</span>: <span class="st">'title'</span>, <span class="st">'type'</span>: <span class="st">'epitheton_title'</span>}, <span class="st">'id'</span>: <span class="st">'400354'</span>}, <span class="st">'transcription'</span>: {<span class="st">'mdc'</span>: <span class="st">'nb-jr(.t)-(j)x.t'</span>, <span class="st">'unicode'</span>: <span class="st">'nb-jr(.t)-(j)ḫ.t'</span>}, <span class="st">'translations'</span>: {<span class="st">'de'</span>: [<span class="st">'Herr des Rituals'</span>]}, <span class="st">'type'</span>: <span class="st">'word'</span>}, {<span class="st">'annoTypes'</span>: [<span class="st">'ägyptologische Textsegmentierung'</span>], <span class="st">'flexion'</span>: {<span class="st">'btsGloss'</span>: <span class="st">'(unspecified)'</span>, <span class="st">'lingGloss'</span>: <span class="st">'ROYLN'</span>, <span class="st">'numeric'</span>: <span class="dv">3</span>}, <span class="st">'glyphs'</span>: {<span class="st">'mdc_artificially_aligned'</span>: <span class="va">True</span>, <span class="st">'mdc_compact'</span>: <span class="st">'&lt;-M17-O34:Q3-E23-N17-&gt;'</span>, <span class="st">'mdc_original'</span>: <span class="st">'&lt;-M17-O34-Q3-E23-N17-&gt;'</span>, <span class="st">'mdc_original_safe'</span>: <span class="va">None</span>, <span class="st">'mdc_tla'</span>: <span class="st">'&lt;-M17-O34-Q3-E23-N17-&gt;'</span>, <span class="st">'order'</span>: [<span class="dv">18</span>, <span class="dv">19</span>, <span class="dv">20</span>, <span class="dv">21</span>, <span class="dv">22</span>, <span class="dv">23</span>], <span class="st">'unicode'</span>: <span class="st">'𓍹</span><span class="ch">\U0001343c</span><span class="st">𓇋𓊃𓊪𓃭𓇿</span><span class="ch">\U0001343d</span><span class="st">𓍺'</span>}, <span class="st">'id'</span>: <span class="st">'J3MLYALWVNAMDDG33VZ3RIEEUA'</span>, <span class="st">'label'</span>: <span class="st">'Jsplt'</span>, <span class="st">'lemma'</span>: {<span class="st">'POS'</span>: {<span class="st">'subtype'</span>: <span class="st">'kings_name'</span>, <span class="st">'type'</span>: <span class="st">'entity_name'</span>}, <span class="st">'id'</span>: <span class="st">'850103'</span>}, <span class="st">'transcription'</span>: {<span class="st">'mdc'</span>: <span class="st">'jsplt'</span>, <span class="st">'unicode'</span>: <span class="st">'Jsplt'</span>}, <span class="st">'translations'</span>: {<span class="st">'de'</span>: [<span class="st">'Aspelta'</span>]}, <span class="st">'type'</span>: <span class="st">'word'</span>}, {<span class="st">'annoTypes'</span>: [<span class="st">'ägyptologische Textsegmentierung'</span>], <span class="st">'flexion'</span>: {<span class="st">'btsGloss'</span>: <span class="st">'(unspecified)'</span>, <span class="st">'lingGloss'</span>: <span class="st">'N.m:sg'</span>, <span class="st">'numeric'</span>: <span class="dv">3</span>}, <span class="st">'glyphs'</span>: {<span class="st">'mdc_artificially_aligned'</span>: <span class="va">True</span>, <span class="st">'mdc_compact'</span>: <span class="st">'U5:D36-P8h'</span>, <span class="st">'mdc_original'</span>: <span class="st">'U5-D36-P8h'</span>, <span class="st">'mdc_original_safe'</span>: <span class="va">None</span>, <span class="st">'mdc_tla'</span>: <span class="st">'U5-D36-P8h'</span>, <span class="st">'order'</span>: [<span class="dv">25</span>, <span class="dv">26</span>, <span class="dv">27</span>], <span class="st">'unicode'</span>: <span class="st">'𓌷𓂝𓊤︂'</span>}, <span class="st">'id'</span>: <span class="st">'OKLGJLCEQFHU7HDRYUTYR352YA'</span>, <span class="st">'label'</span>: <span class="st">'mꜣꜥ-ḫrw'</span>, <span class="st">'lemma'</span>: {<span class="st">'POS'</span>: {<span class="st">'subtype'</span>: <span class="st">'substantive_masc'</span>, <span class="st">'type'</span>: <span class="st">'substantive'</span>}, <span class="st">'id'</span>: <span class="st">'66750'</span>}, <span class="st">'transcription'</span>: {<span class="st">'mdc'</span>: <span class="st">'mAa-xrw'</span>, <span class="st">'unicode'</span>: <span class="st">'mꜣꜥ-ḫrw'</span>}, <span class="st">'translations'</span>: {<span class="st">'de'</span>: [<span class="st">'Gerechtfertigter (der selige Tote)'</span>]}, <span class="st">'type'</span>: <span class="st">'word'</span>}], <span class="st">'transcription'</span>: {<span class="st">'mdc'</span>: <span class="st">'nn gH a.t.PL=f jp〈t〉n wsr.w nzw nb-tA.DU nb-jr(.t)-(j)x.t jsplt mAa-xrw'</span>, <span class="st">'unicode'</span>: <span class="st">'nn gḥ ꜥ.t.PL=f jp〈t〉n Wsr.w nzw nb-Tꜣ.DU nb-jr(.t)-(j)ḫ.t Jsplt mꜣꜥ-ḫrw'</span>}, <span class="st">'translations'</span>: {<span class="st">'de'</span>: [<span class="st">'Diese seine Glieder werden nicht matt sein, (die des) Osiris Königs, des Herrn der Beiden Länder, des Herrn des Rituals, Aspelta, des Gerechtfertigten.'</span>]}, <span class="st">'type'</span>: <span class="va">None</span>, <span class="st">'wordCount'</span>: <span class="dv">11</span>, <span class="st">'editors'</span>: {<span class="st">'author'</span>: <span class="st">'Doris Topmann'</span>, <span class="st">'contributors'</span>: <span class="va">None</span>, <span class="st">'created'</span>: <span class="st">'2020-12-23 12:24:26'</span>, <span class="st">'type'</span>: <span class="va">None</span>, <span class="st">'updated'</span>: <span class="st">'2022-08-29 10:22:01'</span>}}</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(eg1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-24" class="cell" data-quarto-private-1="{&quot;key&quot;:&quot;ExecuteTime&quot;,&quot;value&quot;:{&quot;end_time&quot;:&quot;2024-05-01T09:02:48.487302Z&quot;,&quot;start_time&quot;:&quot;2024-05-01T09:02:48.483332Z&quot;}}" data-scrolled="true">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># parse the dictionary (json)</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>unicodeHiero <span class="op">=</span> []</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>transcription <span class="op">=</span> []</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>translLemma <span class="op">=</span> []</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>posLemma <span class="op">=</span> []</span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>tokenID <span class="op">=</span> []</span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> text_word <span class="kw">in</span> eg1[<span class="st">"tokens"</span>] :</span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(text_word[<span class="st">"glyphs"</span>][<span class="st">"unicode"</span>], text_word[<span class="st">"transcription"</span>][<span class="st">"unicode"</span>], text_word[<span class="st">"translations"</span>][<span class="st">"de"</span>][<span class="dv">0</span>], text_word[<span class="st">"lemma"</span>][<span class="st">"POS"</span>][<span class="st">"type"</span>], text_word[<span class="st">"id"</span>] )</span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a>    tokenID.append(text_word[<span class="st">"id"</span>])</span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a>    unicodeHiero.append(text_word[<span class="st">"glyphs"</span>][<span class="st">"unicode"</span>])</span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a>    translLemma.append(text_word[<span class="st">"translations"</span>][<span class="st">"de"</span>][<span class="dv">0</span>])</span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a>    posLemma.append(text_word[<span class="st">"lemma"</span>][<span class="st">"POS"</span>][<span class="st">"type"</span>])</span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb19-16"><a href="#cb19-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> text_word[<span class="st">"transcription"</span>][<span class="st">"unicode"</span>][<span class="dv">0</span>] <span class="op">==</span> <span class="st">"="</span> : <span class="co"># replace equal sign as it will cause trouble in spreadsheet software like MS Excel</span></span>
<span id="cb19-17"><a href="#cb19-17" aria-hidden="true" tabindex="-1"></a>        transcription.append(text_word[<span class="st">"transcription"</span>][<span class="st">"unicode"</span>].replace(<span class="st">"="</span>, <span class="st">'⸗'</span>)) <span class="co"># U+2E17</span></span>
<span id="cb19-18"><a href="#cb19-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span> :</span>
<span id="cb19-19"><a href="#cb19-19" aria-hidden="true" tabindex="-1"></a>        transcription.append(text_word[<span class="st">"transcription"</span>][<span class="st">"unicode"</span>])</span>
<span id="cb19-20"><a href="#cb19-20" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb19-21"><a href="#cb19-21" aria-hidden="true" tabindex="-1"></a>    </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-25" class="cell" data-quarto-private-1="{&quot;key&quot;:&quot;ExecuteTime&quot;,&quot;value&quot;:{&quot;end_time&quot;:&quot;2024-05-01T09:02:48.490623Z&quot;,&quot;start_time&quot;:&quot;2024-05-01T09:02:48.488683Z&quot;}}" data-scrolled="true">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># get the ID of this sentence</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>sentenceID <span class="op">=</span> eg1[<span class="st">"id"</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-26" class="cell" data-quarto-private-1="{&quot;key&quot;:&quot;ExecuteTime&quot;,&quot;value&quot;:{&quot;end_time&quot;:&quot;2024-05-01T09:02:48.969581Z&quot;,&quot;start_time&quot;:&quot;2024-05-01T09:02:48.492477Z&quot;}}" data-scrolled="true">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create a dataframe and fill it</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>df_eg <span class="op">=</span> pd.DataFrame({</span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">'unicode_hieroglyphs'</span>: unicodeHiero,</span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">'unicode_transcription'</span>: transcription,</span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">'lemma_translation'</span>: translLemma,</span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">'part-of-speech'</span>: posLemma,</span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">'tokenID'</span> : tokenID</span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a>df_eg</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-27" class="cell" data-quarto-private-1="{&quot;key&quot;:&quot;ExecuteTime&quot;,&quot;value&quot;:{&quot;end_time&quot;:&quot;2024-05-01T09:02:48.976861Z&quot;,&quot;start_time&quot;:&quot;2024-05-01T09:02:48.970774Z&quot;}}" data-scrolled="true">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># save as *.csv</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>fileName <span class="op">=</span> <span class="st">"aspelta_TLA_Sentence_"</span> <span class="op">+</span> sentenceID <span class="op">+</span> <span class="st">".csv"</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>df_eg.to_csv(fileName)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="akkadian-example-2" class="level2">
<h2 class="anchored" data-anchor-id="akkadian-example-2">Akkadian Example 2:</h2>
<p>consider the following Akkadian text:</p>
<p>http://www.achemenet.com//fr/item/?/sources-textuelles/textes-par-publication/Strassmaier_Cyrus/1665118</p>
<p>6 udu-nita<sub>2</sub> <i>ina</i> šu<sup>II</sup> <sup>Id</sup>en-gi a-<i>šú šá</i> <sup>Id</sup>[</p>
<p><i>a-na</i> 8 gín 4-<i>tú </i>kù-babbar<i> i-na</i> kù-babbar</p>
<p><i>šá</i> <i>i-di</i> é [ o o o ]<i> a-na</i> é-babbar-ra</p>
<p><i>it-ta-din</i> 5 udu-nita<sub>2</sub> <i>šá</i> <sup>I</sup><i>ka-ṣir</i></p>
<p>a-<i>šú šá</i> <sup>Id</sup>en-mu<i> a-na</i> 7 gín 4-<i>tú</i></p>
<p>kù-babbar <i>šá</i> <i>muh-hi</i> <i>dul-lu</i> <sup>I</sup>mu-mu</p>
<p><i>ú-šá-hi-su a-na</i> <i>lìb-bi</i> sì-<i>na</i></p>
<p>1 udu-nita<sub>2</sub><i> a-na</i> 1 gín 4-<i>tú </i>kù-babbar</p>
<p><i>ina</i> šu<sup>II</sup> <sup>Id</sup>utu-ba-<i>šá</i><sup>!</sup> [</p>
<p>1 udu-nita<sub>2</sub> <i>šá</i> <sup>I</sup>DU-[</p>
<p><i>a-na</i> 1<sup>?</sup> gín [</p>
<p>pap [13 udu-nita<sub>2</sub>-meš</p>
<p>iti du<sub>6</sub> u<sub>4</sub> [o-kam] mu sag nam-lugal-la</p>
<p><sup>I</sup><i>ku-ra-áš</i> lugal tin-tir<sup>ki</sup> <i>u</i> kur-kur</p>
<p>How would you preprocess this text?</p>
<div id="cell-29" class="cell" data-quarto-private-1="{&quot;key&quot;:&quot;ExecuteTime&quot;,&quot;value&quot;:{&quot;end_time&quot;:&quot;2024-05-01T09:26:38.626941Z&quot;,&quot;start_time&quot;:&quot;2024-05-01T09:26:38.617531Z&quot;}}">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co">## raw text</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>akk2 <span class="op">=</span> <span class="st">"""6 udu-nita&lt;sub&gt;2&lt;/sub&gt; &lt;i&gt;ina&lt;/i&gt; šu&lt;sup&gt;II&lt;/sup&gt; &lt;sup&gt;Id&lt;/sup&gt;en-gi a-&lt;i&gt;šú šá&lt;/i&gt; &lt;sup&gt;Id&lt;/sup&gt;[</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a><span class="st">&lt;i&gt;a-na&lt;/i&gt; 8 gín 4-&lt;i&gt;tú &lt;/i&gt;kù-babbar&lt;i&gt; i-na&lt;/i&gt; kù-babbar </span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a><span class="st">&lt;i&gt;šá&lt;/i&gt; &lt;i&gt;i-di&lt;/i&gt; é [ o o o ]&lt;i&gt; a-na&lt;/i&gt; é-babbar-ra </span></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a><span class="st">&lt;i&gt;it-ta-din&lt;/i&gt; 5 udu-nita&lt;sub&gt;2&lt;/sub&gt; &lt;i&gt;šá&lt;/i&gt; &lt;sup&gt;I&lt;/sup&gt;&lt;i&gt;ka-ṣir&lt;/i&gt; </span></span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a><span class="st">a-&lt;i&gt;šú šá&lt;/i&gt; &lt;sup&gt;Id&lt;/sup&gt;en-mu&lt;i&gt; a-na&lt;/i&gt; 7 gín 4-&lt;i&gt;tú&lt;/i&gt; </span></span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a><span class="st">kù-babbar &lt;i&gt;šá&lt;/i&gt; &lt;i&gt;muh-hi&lt;/i&gt; &lt;i&gt;dul-lu&lt;/i&gt; &lt;sup&gt;I&lt;/sup&gt;mu-mu </span></span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a><span class="st">&lt;i&gt;ú-šá-hi-su a-na&lt;/i&gt; &lt;i&gt;lìb-bi&lt;/i&gt; sì-&lt;i&gt;na&lt;/i&gt; </span></span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a><span class="st">1 udu-nita&lt;sub&gt;2&lt;/sub&gt;&lt;i&gt; a-na&lt;/i&gt; 1 gín 4-&lt;i&gt;tú &lt;/i&gt;kù-babbar </span></span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a><span class="st">&lt;i&gt;ina&lt;/i&gt; šu&lt;sup&gt;II&lt;/sup&gt; &lt;sup&gt;Id&lt;/sup&gt;utu-ba-&lt;i&gt;šá&lt;/i&gt;&lt;sup&gt;!&lt;/sup&gt; [</span></span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a><span class="st">1 udu-nita&lt;sub&gt;2&lt;/sub&gt; &lt;i&gt;šá&lt;/i&gt; &lt;sup&gt;I&lt;/sup&gt;DU-[</span></span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a><span class="st">&lt;i&gt;a-na&lt;/i&gt; 1&lt;sup&gt;?&lt;/sup&gt; gín [</span></span>
<span id="cb23-14"><a href="#cb23-14" aria-hidden="true" tabindex="-1"></a><span class="st">pap [13 udu-nita&lt;sub&gt;2&lt;/sub&gt;-meš</span></span>
<span id="cb23-15"><a href="#cb23-15" aria-hidden="true" tabindex="-1"></a><span class="st">iti du&lt;sub&gt;6&lt;/sub&gt; u&lt;sub&gt;4&lt;/sub&gt; [o-kam] mu sag nam-lugal-la </span></span>
<span id="cb23-16"><a href="#cb23-16" aria-hidden="true" tabindex="-1"></a><span class="st">&lt;sup&gt;I&lt;/sup&gt;&lt;i&gt;ku-ra-áš&lt;/i&gt; lugal tin-tir&lt;sup&gt;ki&lt;/sup&gt; &lt;i&gt;u&lt;/i&gt; kur-kur"""</span></span>
<span id="cb23-17"><a href="#cb23-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-18"><a href="#cb23-18" aria-hidden="true" tabindex="-1"></a>akk2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-30" class="cell" data-quarto-private-1="{&quot;key&quot;:&quot;ExecuteTime&quot;,&quot;value&quot;:{&quot;end_time&quot;:&quot;2024-05-01T09:26:39.251124Z&quot;,&quot;start_time&quot;:&quot;2024-05-01T09:26:39.233972Z&quot;}}" data-scrolled="true">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co">## Clean the raw text in akk2</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>akk2 <span class="op">=</span> akk2.replace(<span class="st">"&lt;sub&gt;"</span>, <span class="st">""</span>)</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>akk2 <span class="op">=</span> akk2.replace(<span class="st">"&lt;/sub&gt;"</span>, <span class="st">""</span>)</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a><span class="co">## Harmonize word and sign boundaries</span></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Shift blank before/after &lt;i&gt;/&lt;/i&gt;</span></span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a>akk2 <span class="op">=</span> akk2.replace(<span class="st">" &lt;/i&gt;"</span>, <span class="st">"&lt;/i&gt; "</span>)</span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a>akk2 <span class="op">=</span> akk2.replace(<span class="st">"&lt;i&gt; "</span>, <span class="st">" &lt;i&gt;"</span>)</span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a><span class="co">#print(akk2)</span></span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> re</span>
<span id="cb24-14"><a href="#cb24-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Add hyphen before &lt;sup&gt; tags if there is no space before the tag</span></span>
<span id="cb24-15"><a href="#cb24-15" aria-hidden="true" tabindex="-1"></a>akk2 <span class="op">=</span> re.sub(<span class="vs">r'</span><span class="kw">(</span><span class="pp">[^ ]</span><span class="kw">)(</span><span class="vs">&lt;sup&gt;</span><span class="kw">)</span><span class="vs">'</span>, <span class="vs">r'</span><span class="ch">\1</span><span class="vs">-</span><span class="ch">\2</span><span class="vs">'</span>, akk2)              </span>
<span id="cb24-16"><a href="#cb24-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Add hyphen after &lt;/sup&gt; and &lt;/i&gt; tags if there is no space after the tag</span></span>
<span id="cb24-17"><a href="#cb24-17" aria-hidden="true" tabindex="-1"></a>akk2 <span class="op">=</span> re.sub(<span class="vs">r'</span><span class="kw">(</span><span class="vs">&lt;/sup&gt;</span><span class="cf">|</span><span class="vs">&lt;/i&gt;</span><span class="kw">)(</span><span class="pp">[^ ]</span><span class="kw">)</span><span class="vs">'</span>, <span class="vs">r'</span><span class="ch">\1</span><span class="vs">-</span><span class="ch">\2</span><span class="vs">'</span>, akk2)</span>
<span id="cb24-18"><a href="#cb24-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-19"><a href="#cb24-19" aria-hidden="true" tabindex="-1"></a><span class="co"># from a-&lt;i&gt;šú šá&lt;/i&gt; to a-&lt;i&gt;šú&lt;/i&gt; &lt;i&gt;šá&lt;/i&gt;</span></span>
<span id="cb24-20"><a href="#cb24-20" aria-hidden="true" tabindex="-1"></a>pattern <span class="op">=</span> <span class="vs">r"</span><span class="kw">(</span><span class="vs">&lt;i&gt;</span><span class="pp">[^&lt;]</span><span class="op">*</span><span class="kw">)(</span><span class="pp">[ -]</span><span class="kw">)</span><span class="vs">"</span></span>
<span id="cb24-21"><a href="#cb24-21" aria-hidden="true" tabindex="-1"></a><span class="cf">while</span> <span class="va">True</span>:</span>
<span id="cb24-22"><a href="#cb24-22" aria-hidden="true" tabindex="-1"></a>    new_text <span class="op">=</span> re.sub(pattern, <span class="vs">r"</span><span class="ch">\1</span><span class="vs">&lt;/i&gt;</span><span class="ch">\2</span><span class="vs">&lt;i&gt;"</span>, akk2)</span>
<span id="cb24-23"><a href="#cb24-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> new_text <span class="op">==</span> akk2:  <span class="co"># End loop if there are no more differences between the existing one and the one created by re substitution</span></span>
<span id="cb24-24"><a href="#cb24-24" aria-hidden="true" tabindex="-1"></a>        <span class="cf">break</span></span>
<span id="cb24-25"><a href="#cb24-25" aria-hidden="true" tabindex="-1"></a>    akk2 <span class="op">=</span> new_text</span>
<span id="cb24-26"><a href="#cb24-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-27"><a href="#cb24-27" aria-hidden="true" tabindex="-1"></a><span class="co"># Replace double hyphens by simple ones</span></span>
<span id="cb24-28"><a href="#cb24-28" aria-hidden="true" tabindex="-1"></a>akk2 <span class="op">=</span> akk2.replace(<span class="st">"--"</span>, <span class="st">"-"</span>)</span>
<span id="cb24-29"><a href="#cb24-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-30"><a href="#cb24-30" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(akk2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-31" class="cell" data-quarto-private-1="{&quot;key&quot;:&quot;ExecuteTime&quot;,&quot;value&quot;:{&quot;end_time&quot;:&quot;2024-05-01T09:38:21.419364Z&quot;,&quot;start_time&quot;:&quot;2024-05-01T09:38:21.399006Z&quot;}}" data-scrolled="true">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co">## Create a dictionary with annotations</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>akk2_lineList <span class="op">=</span> akk2.split(<span class="st">"</span><span class="ch">\n</span><span class="st">"</span>)</span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>lines_list <span class="op">=</span> []</span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>line_count <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> line <span class="kw">in</span> akk2_lineList:</span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a>    temp_words <span class="op">=</span> line.split()</span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a>    line_dict <span class="op">=</span> {}</span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a>    line_dict[<span class="st">'line_id'</span>] <span class="op">=</span> line_count</span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true" tabindex="-1"></a>    line_dict[<span class="st">'words'</span>] <span class="op">=</span> temp_words</span>
<span id="cb25-13"><a href="#cb25-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-14"><a href="#cb25-14" aria-hidden="true" tabindex="-1"></a>    lines_list.append(line_dict)</span>
<span id="cb25-15"><a href="#cb25-15" aria-hidden="true" tabindex="-1"></a>    line_count <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb25-16"><a href="#cb25-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-17"><a href="#cb25-17" aria-hidden="true" tabindex="-1"></a><span class="co">#print(lines_list)</span></span>
<span id="cb25-18"><a href="#cb25-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-19"><a href="#cb25-19" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> line <span class="kw">in</span> lines_list :</span>
<span id="cb25-20"><a href="#cb25-20" aria-hidden="true" tabindex="-1"></a>    subword_list <span class="op">=</span> []</span>
<span id="cb25-21"><a href="#cb25-21" aria-hidden="true" tabindex="-1"></a>    word_count <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb25-22"><a href="#cb25-22" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb25-23"><a href="#cb25-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> word <span class="kw">in</span> line[<span class="st">'words'</span>] :</span>
<span id="cb25-24"><a href="#cb25-24" aria-hidden="true" tabindex="-1"></a>        subword_dict <span class="op">=</span> {}</span>
<span id="cb25-25"><a href="#cb25-25" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb25-26"><a href="#cb25-26" aria-hidden="true" tabindex="-1"></a>        sign_list <span class="op">=</span> []</span>
<span id="cb25-27"><a href="#cb25-27" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb25-28"><a href="#cb25-28" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="st">'-'</span> <span class="kw">in</span> word: <span class="co"># if more than one sign, separated by hyphen</span></span>
<span id="cb25-29"><a href="#cb25-29" aria-hidden="true" tabindex="-1"></a>            temp_signs <span class="op">=</span> word.split(<span class="st">'-'</span>)</span>
<span id="cb25-30"><a href="#cb25-30" aria-hidden="true" tabindex="-1"></a>            sign_list.extend(temp_signs)</span>
<span id="cb25-31"><a href="#cb25-31" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span> : <span class="co"># if only individual sign </span></span>
<span id="cb25-32"><a href="#cb25-32" aria-hidden="true" tabindex="-1"></a>            sign_list.append(word)</span>
<span id="cb25-33"><a href="#cb25-33" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb25-34"><a href="#cb25-34" aria-hidden="true" tabindex="-1"></a>        signs_per_word <span class="op">=</span> []</span>
<span id="cb25-35"><a href="#cb25-35" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> sign <span class="kw">in</span> sign_list :</span>
<span id="cb25-36"><a href="#cb25-36" aria-hidden="true" tabindex="-1"></a>            signs_per_word.append(sign)</span>
<span id="cb25-37"><a href="#cb25-37" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb25-38"><a href="#cb25-38" aria-hidden="true" tabindex="-1"></a>        subword_dict[<span class="st">'word_id'</span>] <span class="op">=</span> word_count</span>
<span id="cb25-39"><a href="#cb25-39" aria-hidden="true" tabindex="-1"></a>        word_count <span class="op">+=</span> <span class="dv">1</span>  </span>
<span id="cb25-40"><a href="#cb25-40" aria-hidden="true" tabindex="-1"></a>        subword_dict[<span class="st">'signs'</span>] <span class="op">=</span> signs_per_word</span>
<span id="cb25-41"><a href="#cb25-41" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb25-42"><a href="#cb25-42" aria-hidden="true" tabindex="-1"></a>        list_sign_func_dict <span class="op">=</span> []</span>
<span id="cb25-43"><a href="#cb25-43" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> sign <span class="kw">in</span> subword_dict[<span class="st">'signs'</span>] :</span>
<span id="cb25-44"><a href="#cb25-44" aria-hidden="true" tabindex="-1"></a>            sign_func_dict <span class="op">=</span> {}</span>
<span id="cb25-45"><a href="#cb25-45" aria-hidden="true" tabindex="-1"></a>            <span class="co">#print(sign)</span></span>
<span id="cb25-46"><a href="#cb25-46" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> sign.startswith(<span class="st">'&lt;i&gt;'</span>) <span class="kw">and</span> sign.endswith(<span class="st">'&lt;/i&gt;'</span>) :</span>
<span id="cb25-47"><a href="#cb25-47" aria-hidden="true" tabindex="-1"></a>                sign_func_dict[<span class="st">'sign'</span>] <span class="op">=</span> sign[<span class="dv">3</span>:<span class="op">-</span><span class="dv">4</span>]</span>
<span id="cb25-48"><a href="#cb25-48" aria-hidden="true" tabindex="-1"></a>                sign_func_dict[<span class="st">'sign_function'</span>] <span class="op">=</span> <span class="st">'phonogram'</span></span>
<span id="cb25-49"><a href="#cb25-49" aria-hidden="true" tabindex="-1"></a>               <span class="co"># sign = </span></span>
<span id="cb25-50"><a href="#cb25-50" aria-hidden="true" tabindex="-1"></a>            <span class="cf">elif</span> sign.startswith(<span class="st">'&lt;sup&gt;'</span>) <span class="kw">and</span> sign.endswith(<span class="st">'&lt;/sup&gt;'</span>) :</span>
<span id="cb25-51"><a href="#cb25-51" aria-hidden="true" tabindex="-1"></a>                sign_func_dict[<span class="st">'sign'</span>] <span class="op">=</span> sign[<span class="dv">5</span>:<span class="op">-</span><span class="dv">6</span>]</span>
<span id="cb25-52"><a href="#cb25-52" aria-hidden="true" tabindex="-1"></a>                sign_func_dict[<span class="st">'sign_function'</span>] <span class="op">=</span> <span class="st">'classifier'</span></span>
<span id="cb25-53"><a href="#cb25-53" aria-hidden="true" tabindex="-1"></a>            <span class="cf">else</span>:</span>
<span id="cb25-54"><a href="#cb25-54" aria-hidden="true" tabindex="-1"></a>                sign_func_dict[<span class="st">'sign'</span>] <span class="op">=</span> sign</span>
<span id="cb25-55"><a href="#cb25-55" aria-hidden="true" tabindex="-1"></a>                sign_func_dict[<span class="st">'sign_function'</span>] <span class="op">=</span> <span class="st">'logogram'</span></span>
<span id="cb25-56"><a href="#cb25-56" aria-hidden="true" tabindex="-1"></a>                </span>
<span id="cb25-57"><a href="#cb25-57" aria-hidden="true" tabindex="-1"></a>            list_sign_func_dict.append(sign_func_dict)</span>
<span id="cb25-58"><a href="#cb25-58" aria-hidden="true" tabindex="-1"></a>        <span class="co">#print(list_sign_func_dict)</span></span>
<span id="cb25-59"><a href="#cb25-59" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb25-60"><a href="#cb25-60" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb25-61"><a href="#cb25-61" aria-hidden="true" tabindex="-1"></a>        subword_dict[<span class="st">'signs'</span>] <span class="op">=</span> list_sign_func_dict</span>
<span id="cb25-62"><a href="#cb25-62" aria-hidden="true" tabindex="-1"></a>        subword_list.append(subword_dict)</span>
<span id="cb25-63"><a href="#cb25-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-64"><a href="#cb25-64" aria-hidden="true" tabindex="-1"></a>    line[<span class="st">'words'</span>] <span class="op">=</span> subword_list</span>
<span id="cb25-65"><a href="#cb25-65" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb25-66"><a href="#cb25-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-67"><a href="#cb25-67" aria-hidden="true" tabindex="-1"></a><span class="co">#print(lines_list)    </span></span>
<span id="cb25-68"><a href="#cb25-68" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> line <span class="kw">in</span> lines_list:</span>
<span id="cb25-69"><a href="#cb25-69" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(line)</span>
<span id="cb25-70"><a href="#cb25-70" aria-hidden="true" tabindex="-1"></a>    <span class="co">#for words in line:</span></span>
<span id="cb25-71"><a href="#cb25-71" aria-hidden="true" tabindex="-1"></a>    <span class="co">#    print(line['words'])</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="egyptian-example-2" class="level2">
<h2 class="anchored" data-anchor-id="egyptian-example-2">Egyptian Example 2:</h2>
<p>How to deal with non-Unicode hieroglyphs (<g> tag + Gardiner number)</g></p>
<div id="cell-33" class="cell" data-quarto-private-1="{&quot;key&quot;:&quot;ExecuteTime&quot;,&quot;value&quot;:{&quot;end_time&quot;:&quot;2024-05-01T09:02:49.013299Z&quot;,&quot;start_time&quot;:&quot;2024-05-01T09:02:49.013291Z&quot;}}" data-scrolled="true">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>eg2_csv <span class="op">=</span> <span class="st">""",text,line,word,ref,frag,norm,unicode_word,unicode,lemma_id,cf,pos,sense</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="st">92,3Z5EM77HJFCOPKZDDZFEMI6KVY,5,7,3Z5EM77HJFCOPKZDDZFEMI6KVY.5.7,gꜣu̯.w,gꜣu̯.w,&lt;g&gt;V96&lt;/g&gt;𓅱,"['&lt;', 'g', '&gt;', 'V', '9', '6', '&lt;', '/', 'g', '&gt;', '𓅱']",166210,gꜣu̯,VERB,eng sein; entbehren; (jmdn.) Not leiden lassen</span></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a><span class="st">151,4WVXFJZFLNAYHP3Y5O5SLWD7DA,2,2,4WVXFJZFLNAYHP3Y5O5SLWD7DA.2.2,nꜥw,nꜥw,𓈖𓂝𓅱&lt;g&gt;I14C&lt;/g&gt;𓏤,"['𓈖', '𓂝', '𓅱', '&lt;', 'g', '&gt;', 'I', '1', '4', 'C', '&lt;', '/', 'g', '&gt;', '𓏤']",80510,Nꜥw,PROPN,Sich windender (Personifikation der Schlange)</span></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a><span class="st">153,4WVXFJZFLNAYHP3Y5O5SLWD7DA,2,5,4WVXFJZFLNAYHP3Y5O5SLWD7DA.2.5,nꜥw,nꜥw,𓈖𓂝𓅱&lt;g&gt;I14C&lt;/g&gt;𓏤,"['𓈖', '𓂝', '𓅱', '&lt;', 'g', '&gt;', 'I', '1', '4', 'C', '&lt;', '/', 'g', '&gt;', '𓏤']",80510,Nꜥw,PROPN,Sich windender (Personifikation der Schlange)</span></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a><span class="st">200,67HZI45S3REA3LWVZOKJ6QJOIE,14,9,67HZI45S3REA3LWVZOKJ6QJOIE.14.9,nbi̯.n,nbi̯.n,𓈖𓎟𓃀&lt;g&gt;D107&lt;/g&gt;𓈖,"['𓈖', '𓎟', '𓃀', '&lt;', 'g', '&gt;', 'D', '1', '0', '7', '&lt;', '/', 'g', '&gt;', '𓈖']",82520,nbi̯,VERB,schmelzen; gießen</span></span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a><span class="st">204,67HZI45S3REA3LWVZOKJ6QJOIE,14,13,67HZI45S3REA3LWVZOKJ6QJOIE.14.13,nḏr.n,nḏr.n,𓈖𓇦𓂋&lt;g&gt;U19A&lt;/g&gt;𓆱𓈖,"['𓈖', '𓇦', '𓂋', '&lt;', 'g', '&gt;', 'U', '1', '9', 'A', '&lt;', '/', 'g', '&gt;', '𓆱', '𓈖']",91630,nḏr,VERB,(Holz) bearbeiten; zimmern</span></span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a><span class="st">206,67HZI45S3REA3LWVZOKJ6QJOIE,14,15,67HZI45S3REA3LWVZOKJ6QJOIE.14.15,b(w)n.wDU,bwn.wDU,𓃀𓈖𓏌𓅱&lt;g&gt;T86&lt;/g&gt;&lt;g&gt;T86&lt;/g&gt;,"['𓃀', '𓈖', '𓏌', '𓅱', '&lt;', 'g', '&gt;', 'T', '8', '6', '&lt;', '/', 'g', '&gt;', '&lt;', 'g', '&gt;', 'T', '8', '6', '&lt;', '/', 'g', '&gt;']",55330,bwn,NOUN,Speerspitzen (des Fischspeeres)</span></span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a><span class="st">"""</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-34" class="cell" data-quarto-private-1="{&quot;key&quot;:&quot;ExecuteTime&quot;,&quot;value&quot;:{&quot;end_time&quot;:&quot;2024-05-01T09:02:49.014542Z&quot;,&quot;start_time&quot;:&quot;2024-05-01T09:02:49.014528Z&quot;}}" data-scrolled="true">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> io <span class="im">import</span> StringIO</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert the string into a StringIO object</span></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a><span class="co"># This is only necessary because we presented the csv as a string not as a file that is loaded into the notebook</span></span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>csv_data <span class="op">=</span> StringIO(eg2_csv)</span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Read the data into a pandas DataFrame</span></span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.read_csv(csv_data)</span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-11"><a href="#cb27-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the DataFrame</span></span>
<span id="cb27-12"><a href="#cb27-12" aria-hidden="true" tabindex="-1"></a>df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-35" class="cell" data-quarto-private-1="{&quot;key&quot;:&quot;ExecuteTime&quot;,&quot;value&quot;:{&quot;end_time&quot;:&quot;2024-05-01T09:02:49.015676Z&quot;,&quot;start_time&quot;:&quot;2024-05-01T09:02:49.015667Z&quot;}}" data-scrolled="true">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> split_tags(text):</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>    parts <span class="op">=</span> []  <span class="co"># List to collect output of the function</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="st">'&lt;g&gt;'</span> <span class="kw">in</span> text <span class="kw">and</span> <span class="st">'&lt;/g&gt;'</span> <span class="kw">in</span> text:</span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>        pre, rest <span class="op">=</span> text.split(<span class="st">'&lt;g&gt;'</span>, <span class="dv">1</span>)  <span class="co"># splits at the first &lt;g&gt; found</span></span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>        tag_content, post <span class="op">=</span> rest.split(<span class="st">'&lt;/g&gt;'</span>, <span class="dv">1</span>)  <span class="co"># splits the rest at the first &lt;/g&gt; found</span></span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a>        <span class="co"># adds elements before the first &lt;g&gt;&lt;/g&gt; tag to the List</span></span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a>        parts.extend(pre)</span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true" tabindex="-1"></a>        <span class="co">#  adds element inside the first &lt;g&gt;&lt;/g&gt; tag to the List</span></span>
<span id="cb28-11"><a href="#cb28-11" aria-hidden="true" tabindex="-1"></a>        parts.append(tag_content)</span>
<span id="cb28-12"><a href="#cb28-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-13"><a href="#cb28-13" aria-hidden="true" tabindex="-1"></a>        <span class="co"># text variable is set to remaining text</span></span>
<span id="cb28-14"><a href="#cb28-14" aria-hidden="true" tabindex="-1"></a>        text <span class="op">=</span> post</span>
<span id="cb28-15"><a href="#cb28-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-16"><a href="#cb28-16" aria-hidden="true" tabindex="-1"></a>    <span class="co"># After last tag found, the remainder of the text is split and added to the List</span></span>
<span id="cb28-17"><a href="#cb28-17" aria-hidden="true" tabindex="-1"></a>    parts.extend(text)</span>
<span id="cb28-18"><a href="#cb28-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> parts</span>
<span id="cb28-19"><a href="#cb28-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-20"><a href="#cb28-20" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> process_text(text):</span>
<span id="cb28-21"><a href="#cb28-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> pd.isna(text): <span class="co"># deals with NaN</span></span>
<span id="cb28-22"><a href="#cb28-22" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> []</span>
<span id="cb28-23"><a href="#cb28-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb28-24"><a href="#cb28-24" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> split_tags(text)</span>
<span id="cb28-25"><a href="#cb28-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-26"><a href="#cb28-26" aria-hidden="true" tabindex="-1"></a><span class="co"># apply functions to every row of the column 'unicode_word'</span></span>
<span id="cb28-27"><a href="#cb28-27" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'unicode_splitted'</span>] <span class="op">=</span> df[<span class="st">'unicode_word'</span>].<span class="bu">apply</span>(process_text)</span>
<span id="cb28-28"><a href="#cb28-28" aria-hidden="true" tabindex="-1"></a><span class="co"># delete obsolete column</span></span>
<span id="cb28-29"><a href="#cb28-29" aria-hidden="true" tabindex="-1"></a>df.drop(<span class="st">'unicode'</span>, axis<span class="op">=</span><span class="dv">1</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb28-30"><a href="#cb28-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-31"><a href="#cb28-31" aria-hidden="true" tabindex="-1"></a>df</span>
<span id="cb28-32"><a href="#cb28-32" aria-hidden="true" tabindex="-1"></a><span class="co">#df.to_csv("EG-TLA-example.csv")</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      <ul class="footer-items list-unstyled">
    <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/DigitalPasts">
      <i class="bi bi-github" role="img" aria-label="DigPasts GitHub">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/shgordin">
      <i class="bi bi-twitter" role="img" aria-label="Shai Gordin Twitter">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="mailto:digpasts@gmail.com">
      <i class="bi bi-envelope" role="img">
</i> 
    </a>
  </li>  
</ul>
    </div>   
    <div class="nav-footer-center">
<p>© Digital Pasts Lab, 2025</p>
</div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>




</body></html>